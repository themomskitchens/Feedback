<!DOCTYPE html>
<html>
<head>
  <title>The Mom's Kitchen - Feedback</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: 'Arial', sans-serif; padding: 20px; background: #fff5e6; }
    form { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); max-width: 500px; margin: auto; }
    h2 { text-align: center; color: #d35400; }
    label { margin-top: 15px; display: block; font-weight: bold; }
    input[type="text"], select, textarea {
      width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc;
    }
    input[type="radio"], input[type="checkbox"] {
      margin-right: 10px;
    }
    button {
      background-color: #d35400; color: white;
      padding: 12px 20px; border: none; border-radius: 5px;
      margin-top: 20px; width: 100%; font-size: 16px; cursor: pointer;
    }
    .popup {
      display: none; text-align: center; padding: 20px; background: #28a745;
      color: white; font-size: 18px; margin-top: 20px; border-radius: 10px;
    }
  </style>
</head>
<body>

  <form id="feedbackForm">
    <h2>üçΩÔ∏è The Mom's Kitchen - Feedback</h2>

    <label>Name</label>
    <input type="text" id="name" required placeholder="Your name">

    <label>Order ID</label>
    <input type="text" id="orderId" required placeholder="e.g., FDX123">

    <label>1. How would you rate the taste of today‚Äôs food?</label>
    <select id="tasteRating" required>
      <option value="">-- Select --</option>
      <option value="‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent</option>
      <option value="‚≠ê‚≠ê‚≠ê‚≠ê Very Good">‚≠ê‚≠ê‚≠ê‚≠ê Very Good</option>
      <option value="‚≠ê‚≠ê‚≠ê Good">‚≠ê‚≠ê‚≠ê Good</option>
      <option value="‚≠ê‚≠ê Average">‚≠ê‚≠ê Average</option>
      <option value="‚≠ê Poor">‚≠ê Poor</option>
    </select>

    <label>2. Would you like to receive our meal menus?</label>
    <input type="radio" name="menuPreference" value="Daily updates" required>Daily Updates<br>
    <input type="radio" name="menuPreference" value="Weekly menus">Weekly Menus<br>
    <input type="radio" name="menuPreference" value="No">No<br>

    <label>3. Would your office be interested in a meal plan?</label>
    <input type="radio" name="officePlan" value="Yes" required>Yes<br>
    <input type="radio" name="officePlan" value="Maybe">Maybe<br>
    <input type="radio" name="officePlan" value="No">No<br>

    <label>4. What kind of meals would your team prefer?</label>
    <input type="checkbox" name="mealPref" value="Breakfast Only">Breakfast Only<br>
    <input type="checkbox" name="mealPref" value="Lunch Only">Lunch Only<br>
    <input type="checkbox" name="mealPref" value="Both">Both<br>
    <input type="checkbox" name="mealPref" value="Healthy Options">Healthy Options<br>

    <label>5. One word to describe your experience</label>
    <input type="text" id="experience" required>

    <label>6. Suggestions</label>
    <textarea id="suggestions" rows="3" placeholder="We'd love your thoughts!"></textarea>

    <button type="submit">Submit Feedback</button>
    <div class="popup" id="popup">‚úÖ Thank you! Feedback submitted.</div>
  </form>

  <script>
    document.getElementById("feedbackForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const mealPrefs = [];
      document.querySelectorAll('input[name="mealPref"]:checked').forEach(cb => mealPrefs.push(cb.value));

      const data = {
        name: document.getElementById("name").value,
        orderId: document.getElementById("orderId").value,
        tasteRating: document.getElementById("tasteRating").value,
        menuPreference: document.querySelector('input[name="menuPreference"]:checked')?.value || "",
        officePlan: document.querySelector('input[name="officePlan"]:checked')?.value || "",
        mealPreferences: mealPrefs,
        experienceWord: document.getElementById("experience").value,
        suggestions: document.getElementById("suggestions").value
      };

      try {
       const response = await fetch("https://script.google.com/macros/s/AKfycb.../exec", {
          method: "POST",
          body: JSON.stringify(data),
          headers: {
            "Content-Type": "application/json"
          }
        });

        const res = await response.json();
        if (res.status === "success") {
          document.getElementById("popup").style.display = "block";
          document.getElementById("feedbackForm").reset();
          setTimeout(() => { document.getElementById("popup").style.display = "none"; }, 3000);
        } else {
          alert("‚ùå Failed to submit. Try again.");
        }
      } catch (err) {
        alert("‚ùå Error: " + err.message);
      }
    });
  </script>
</body>
</html>
